!function(){let e=["fish","poop","weather"],t=["day","rain"],i=e=>Math.floor(3*Math.random())+5+e,s=e=>Math.floor(2*Math.random())+3+e,o=e=>Math.floor(3*Math.random())+4+e,n=e=>{document.querySelector(".fox").className=`fox-${e} fox`},h=e=>{document.querySelector(".game").className=`game ${e}`},c=e=>{document.querySelector(".poop-bag").classList.toggle("hidden",!e)},r=(e="")=>{document.querySelector(".modal").innerHTML=`
  <div class="modal-inner">${e}</div>
  `},a={current:"INIT",clock:1,wakeTime:-1,sleepTime:-1,hungryTime:-1,poopTime:-1,dieTime:-1,timeToStartCelebrating:-1,timeToEndCelebrating:-1,tick(){return this.clock++,console.log("clock",this.clock,this),this.clock===this.wakeTime?this.wake():this.clock===this.sleepTime?this.sleep():this.clock===this.hungryTime?this.hungry():this.clock===this.timeToStartCelebrating?this.startCelebrating():this.clock===this.timeToEndCelebrating?this.endCelebrating():this.clock===this.poopTime?this.poop():this.clock===this.dieTime&&this.die(),this.clock},startGame(){console.log("hatching"),this.current="HATCHING",this.wakeTime=this.clock+3,n("egg"),h("day"),r()},wake(){console.log("awoken"),this.current="IDLING",this.wakeTime=-1,this.scene=Math.random()>.2?0:1,h(t[this.scene]),this.sleepTime=this.clock+60,this.hungryTime=i(this.clock),this.determineFoxState()},sleep(){this.current="SLEEP",n("sleep"),h("night"),this.clearTimes(),this.wakeTime=this.clock+4},clearTimes(){this.wakeTime=-1,this.sleepTime=-1,this.hungryTime=-1,this.dieTime=-1,this.poopTime=-1,this.timeToStartCelebrating=-1,this.timeToEndCelebrating=-1},hungry(){this.current="HUNGRY",this.dieTime=s(this.clock),this.hungryTime=-1,n("hungry")},poop(){this.current="POOPING",this.poopTime=-1,this.dieTime=s(this.clock),n("pooping")},die(){console.log("fox dead"),this.current="DEAD",h("dead"),n("dead"),this.clearTimes(),r("The fox died :( <br/> Press the middle button to start")},startCelebrating(){this.current="CELEBRATING",n("celebrate"),this.timeToStartCelebrating=-1,this.timeToEndCelebrating=this.clock+2},endCelebrating(){this.timeToEndCelebrating=-1,this.current="IDLING",this.determineFoxState(),c(!1)},determineFoxState(){"IDLING"===this.current&&("rain"===t[this.scene]?n("rain"):n("idling"))},handleUserAction(e){if(console.log(e),!["SLEEP","FEEDING","CELEBRATING","HATCHING"].includes(this.current)){if("INIT"===this.current||"DEAD"===this.current){this.startGame();return}switch(e){case"weather":this.changeWeather();break;case"poop":this.cleanUpPoop();break;case"fish":this.feed()}}},changeWeather(){console.log("changeWeather"),this.scene=(this.scene+1)%t.length,h(t[this.scene]),this.determineFoxState()},cleanUpPoop(){console.log("cleaningUpPoop"),"POOPING"===this.current&&(this.dieTime=-1,c(!0),this.startCelebrating(),this.hungryTime=i(this.clock))},feed(){console.log("feed"),"HUNGRY"===this.current&&(this.current="FEEDING",this.dieTime=-1,this.poopTime=o(this.clock),n("eating"),this.timeToStartCelebrating=this.clock+2)}},l=a.handleUserAction.bind(a),m=(t,i)=>document.querySelector(`.${e[t]}-icon`).classList.toggle("highlighted",i);!async function(){let t;console.log("starting game"),t=0,document.querySelector(".buttons").addEventListener("click",function({target:i}){i.classList.contains("left-btn")?(m(t,!1),m(t=(2+t)%e.length,!0)):i.classList.contains("right-btn")?(m(t,!1),m(t=(1+t)%e.length,!0)):l(e[t])});let i=Date.now();requestAnimationFrame(function e(){let t=Date.now();i<=t&&(a.tick(),i=t+3e3),requestAnimationFrame(e)})}()}();
//# sourceMappingURL=index.257b1762.js.map
