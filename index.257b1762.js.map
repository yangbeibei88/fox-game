{"mappings":"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","sources":["<anon>","src/init.js","src/gameState.js","src/constants.js","src/ui.js","src/buttons.js"],"sourcesContent":["(function () {\nconst $826109a56306c1ec$export$254fa44e74c824df = 3000;\nconst $826109a56306c1ec$export$fde44257752a9f60 = [\n    \"fish\",\n    \"poop\",\n    \"weather\"\n];\nconst $826109a56306c1ec$export$d109769b7b60b20b = 0.2;\nconst $826109a56306c1ec$export$d3112996f706f1c = [\n    \"day\",\n    \"rain\"\n];\nconst $826109a56306c1ec$export$6deaf3182f1c1b32 = 60;\nconst $826109a56306c1ec$export$d948a4fe06c2f359 = 4;\nconst $826109a56306c1ec$export$57d09a4d1c60d13c = (clock)=>Math.floor(Math.random() * 3) + 5 + clock;\nconst $826109a56306c1ec$export$90ecfaab96696ff = (clock)=>Math.floor(Math.random() * 2) + 3 + clock;\nconst $826109a56306c1ec$export$c0dfc64653b730bf = (clock)=>Math.floor(Math.random() * 3) + 4 + clock;\n\n\nconst $264b11b18bc87cf6$export$31edf49e44578506 = (state)=>{\n    document.querySelector(\".fox\").className = `fox-${state} fox`;\n};\nconst $264b11b18bc87cf6$export$1f9518c2c59b8e99 = (state)=>{\n    document.querySelector(\".game\").className = `game ${state}`;\n};\nconst $264b11b18bc87cf6$export$7ee9422b060e0e7b = (show)=>{\n    document.querySelector(\".poop-bag\").classList.toggle(\"hidden\", !show);\n};\nconst $264b11b18bc87cf6$export$cd949469e93f219e = (text = \"\")=>{\n    document.querySelector(\".modal\").innerHTML = `\n  <div class=\"modal-inner\">${text}</div>\n  `;\n};\n\n\nconst $9b7ff7c78ea61b59$var$gameState = {\n    current: \"INIT\",\n    clock: 1,\n    // set -1 as inactive\n    wakeTime: -1,\n    sleepTime: -1,\n    hungryTime: -1,\n    poopTime: -1,\n    dieTime: -1,\n    timeToStartCelebrating: -1,\n    timeToEndCelebrating: -1,\n    tick () {\n        this.clock++;\n        console.log(\"clock\", this.clock, this);\n        if (this.clock === this.wakeTime) this.wake();\n        else if (this.clock === this.sleepTime) this.sleep();\n        else if (this.clock === this.hungryTime) this.hungry();\n        else if (this.clock === this.timeToStartCelebrating) this.startCelebrating();\n        else if (this.clock === this.timeToEndCelebrating) this.endCelebrating();\n        else if (this.clock === this.poopTime) this.poop();\n        else if (this.clock === this.dieTime) this.die();\n        return this.clock;\n    },\n    startGame () {\n        console.log(\"hatching\");\n        this.current = \"HATCHING\";\n        this.wakeTime = this.clock + 3;\n        (0, $264b11b18bc87cf6$export$31edf49e44578506)(\"egg\");\n        (0, $264b11b18bc87cf6$export$1f9518c2c59b8e99)(\"day\");\n        (0, $264b11b18bc87cf6$export$cd949469e93f219e)();\n    // this.scene;\n    },\n    wake () {\n        console.log(\"awoken\");\n        this.current = \"IDLING\";\n        this.wakeTime = -1;\n        // modFox(\"idling\");\n        // 0 is day, 1 is rain\n        this.scene = Math.random() > (0, $826109a56306c1ec$export$d109769b7b60b20b) ? 0 : 1;\n        (0, $264b11b18bc87cf6$export$1f9518c2c59b8e99)((0, $826109a56306c1ec$export$d3112996f706f1c)[this.scene]);\n        this.sleepTime = this.clock + (0, $826109a56306c1ec$export$6deaf3182f1c1b32);\n        this.hungryTime = (0, $826109a56306c1ec$export$57d09a4d1c60d13c)(this.clock);\n        this.determineFoxState();\n    },\n    sleep () {\n        this.current = \"SLEEP\";\n        (0, $264b11b18bc87cf6$export$31edf49e44578506)(\"sleep\");\n        (0, $264b11b18bc87cf6$export$1f9518c2c59b8e99)(\"night\");\n        // make sure fox won't get hungry, eating and pooping at night\n        this.clearTimes();\n        this.wakeTime = this.clock + (0, $826109a56306c1ec$export$d948a4fe06c2f359);\n    },\n    clearTimes () {\n        this.wakeTime = -1;\n        this.sleepTime = -1;\n        this.hungryTime = -1;\n        this.dieTime = -1;\n        this.poopTime = -1;\n        this.timeToStartCelebrating = -1;\n        this.timeToEndCelebrating = -1;\n    },\n    hungry () {\n        this.current = \"HUNGRY\";\n        this.dieTime = (0, $826109a56306c1ec$export$90ecfaab96696ff)(this.clock);\n        this.hungryTime = -1;\n        (0, $264b11b18bc87cf6$export$31edf49e44578506)(\"hungry\");\n    },\n    poop () {\n        this.current = \"POOPING\";\n        this.poopTime = -1;\n        this.dieTime = (0, $826109a56306c1ec$export$90ecfaab96696ff)(this.clock);\n        (0, $264b11b18bc87cf6$export$31edf49e44578506)(\"pooping\");\n    },\n    die () {\n        console.log(\"fox dead\");\n        this.current = \"DEAD\";\n        (0, $264b11b18bc87cf6$export$1f9518c2c59b8e99)(\"dead\");\n        (0, $264b11b18bc87cf6$export$31edf49e44578506)(\"dead\");\n        this.clearTimes();\n        (0, $264b11b18bc87cf6$export$cd949469e93f219e)(\"The fox died :( <br/> Press the middle button to start\");\n    },\n    startCelebrating () {\n        this.current = \"CELEBRATING\";\n        (0, $264b11b18bc87cf6$export$31edf49e44578506)(\"celebrate\");\n        this.timeToStartCelebrating = -1;\n        this.timeToEndCelebrating = this.clock + 2;\n    },\n    endCelebrating () {\n        this.timeToEndCelebrating = -1;\n        this.current = \"IDLING\";\n        this.determineFoxState();\n        (0, $264b11b18bc87cf6$export$7ee9422b060e0e7b)(false);\n    },\n    determineFoxState () {\n        if (this.current === \"IDLING\") {\n            if ((0, $826109a56306c1ec$export$d3112996f706f1c)[this.scene] === \"rain\") (0, $264b11b18bc87cf6$export$31edf49e44578506)(\"rain\");\n            else (0, $264b11b18bc87cf6$export$31edf49e44578506)(\"idling\");\n        }\n    },\n    handleUserAction (icon) {\n        const states = [\n            \"SLEEP\",\n            \"FEEDING\",\n            \"CELEBRATING\",\n            \"HATCHING\"\n        ];\n        console.log(icon);\n        if (states.includes(this.current)) // do nothing\n        return;\n        if (this.current === \"INIT\" || this.current === \"DEAD\") {\n            this.startGame();\n            return;\n        }\n        switch(icon){\n            case \"weather\":\n                this.changeWeather();\n                break;\n            case \"poop\":\n                this.cleanUpPoop();\n                break;\n            case \"fish\":\n                this.feed();\n                break;\n        }\n    },\n    changeWeather () {\n        console.log(\"changeWeather\");\n        this.scene = (this.scene + 1) % (0, $826109a56306c1ec$export$d3112996f706f1c).length;\n        (0, $264b11b18bc87cf6$export$1f9518c2c59b8e99)((0, $826109a56306c1ec$export$d3112996f706f1c)[this.scene]);\n        this.determineFoxState();\n    },\n    cleanUpPoop () {\n        console.log(\"cleaningUpPoop\");\n        if (this.current !== \"POOPING\") return;\n        this.dieTime = -1;\n        (0, $264b11b18bc87cf6$export$7ee9422b060e0e7b)(true);\n        this.startCelebrating();\n        this.hungryTime = (0, $826109a56306c1ec$export$57d09a4d1c60d13c)(this.clock);\n    },\n    feed () {\n        console.log(\"feed\");\n        if (this.current !== \"HUNGRY\") return;\n        this.current = \"FEEDING\";\n        this.dieTime = -1;\n        this.poopTime = (0, $826109a56306c1ec$export$c0dfc64653b730bf)(this.clock);\n        (0, $264b11b18bc87cf6$export$31edf49e44578506)(\"eating\");\n        this.timeToStartCelebrating = this.clock + 2;\n    }\n};\nconst $9b7ff7c78ea61b59$export$ccab573699251c80 = $9b7ff7c78ea61b59$var$gameState.handleUserAction.bind($9b7ff7c78ea61b59$var$gameState);\nvar $9b7ff7c78ea61b59$export$2e2bcd8739ae039 = $9b7ff7c78ea61b59$var$gameState;\n\n\n\n\nconst $8558c42164faec60$var$toggleHilighted = (icon, show)=>document.querySelector(`.${(0, $826109a56306c1ec$export$fde44257752a9f60)[icon]}-icon`).classList.toggle(\"highlighted\", show);\nfunction $8558c42164faec60$export$2e2bcd8739ae039(handleUserAction) {\n    let selectedIcon = 0;\n    function buttonClick({ target: target }) {\n        if (target.classList.contains(\"left-btn\")) {\n            $8558c42164faec60$var$toggleHilighted(selectedIcon, false);\n            selectedIcon = (2 + selectedIcon) % (0, $826109a56306c1ec$export$fde44257752a9f60).length;\n            $8558c42164faec60$var$toggleHilighted(selectedIcon, true);\n        } else if (target.classList.contains(\"right-btn\")) {\n            $8558c42164faec60$var$toggleHilighted(selectedIcon, false);\n            selectedIcon = (1 + selectedIcon) % (0, $826109a56306c1ec$export$fde44257752a9f60).length;\n            $8558c42164faec60$var$toggleHilighted(selectedIcon, true);\n        } else handleUserAction((0, $826109a56306c1ec$export$fde44257752a9f60)[selectedIcon]);\n    }\n    document.querySelector(\".buttons\").addEventListener(\"click\", buttonClick);\n}\n\n\nasync function $113300e25b3f2fa7$var$init() {\n    console.log(\"starting game\");\n    (0, $8558c42164faec60$export$2e2bcd8739ae039)((0, $9b7ff7c78ea61b59$export$ccab573699251c80));\n    let nextTimeToTick = Date.now();\n    function nextAnimationFrame() {\n        const now = Date.now();\n        if (nextTimeToTick <= now) {\n            (0, $9b7ff7c78ea61b59$export$2e2bcd8739ae039).tick();\n            nextTimeToTick = now + (0, $826109a56306c1ec$export$254fa44e74c824df);\n        }\n        requestAnimationFrame(nextAnimationFrame);\n    }\n    requestAnimationFrame(nextAnimationFrame);\n// or directly execute nextAnimationFrame()\n// nextAnimationFrame();\n}\n$113300e25b3f2fa7$var$init();\n\n})();\n//# sourceMappingURL=index.257b1762.js.map\n","import gameState, { handleUserAction } from \"./gameState.js\";\nimport { TICK_RATE } from \"./constants.js\";\nimport initButtons from \"./buttons.js\";\n\nasync function init() {\n  console.log(\"starting game\");\n  initButtons(handleUserAction);\n\n  let nextTimeToTick = Date.now();\n\n  function nextAnimationFrame() {\n    const now = Date.now();\n\n    if (nextTimeToTick <= now) {\n      gameState.tick();\n      nextTimeToTick = now + TICK_RATE;\n    }\n\n    requestAnimationFrame(nextAnimationFrame);\n  }\n\n  requestAnimationFrame(nextAnimationFrame);\n  // or directly execute nextAnimationFrame()\n  // nextAnimationFrame();\n}\n\ninit();\n","import {\n  DAY_LENGTH,\n  NIGHT_LENGTH,\n  RAIN_CHANCE,\n  SCENES,\n  getNextDieTime,\n  getNextHungerTime,\n  getNextPoopTime,\n} from \"./constants.js\";\nimport { modFox, modScene, togglePoopBag, writeModal } from \"./ui.js\";\n\nconst gameState = {\n  current: \"INIT\",\n  clock: 1,\n  // set -1 as inactive\n  wakeTime: -1,\n  sleepTime: -1,\n  hungryTime: -1,\n  poopTime: -1,\n  dieTime: -1,\n  timeToStartCelebrating: -1,\n  timeToEndCelebrating: -1,\n  tick() {\n    this.clock++;\n    console.log(\"clock\", this.clock, this);\n    if (this.clock === this.wakeTime) {\n      this.wake();\n    } else if (this.clock === this.sleepTime) {\n      this.sleep();\n    } else if (this.clock === this.hungryTime) {\n      this.hungry();\n    } else if (this.clock === this.timeToStartCelebrating) {\n      this.startCelebrating();\n    } else if (this.clock === this.timeToEndCelebrating) {\n      this.endCelebrating();\n    } else if (this.clock === this.poopTime) {\n      this.poop();\n    } else if (this.clock === this.dieTime) {\n      this.die();\n    }\n    return this.clock;\n  },\n  startGame() {\n    console.log(\"hatching\");\n    this.current = \"HATCHING\";\n    this.wakeTime = this.clock + 3;\n    modFox(\"egg\");\n    modScene(\"day\");\n    writeModal();\n    // this.scene;\n  },\n  wake() {\n    console.log(\"awoken\");\n    this.current = \"IDLING\";\n    this.wakeTime = -1;\n    // modFox(\"idling\");\n    // 0 is day, 1 is rain\n    this.scene = Math.random() > RAIN_CHANCE ? 0 : 1;\n    modScene(SCENES[this.scene]);\n    this.sleepTime = this.clock + DAY_LENGTH;\n    this.hungryTime = getNextHungerTime(this.clock);\n    this.determineFoxState();\n  },\n  sleep() {\n    this.current = \"SLEEP\";\n    modFox(\"sleep\");\n    modScene(\"night\");\n    // make sure fox won't get hungry, eating and pooping at night\n    this.clearTimes();\n    this.wakeTime = this.clock + NIGHT_LENGTH;\n  },\n  clearTimes() {\n    this.wakeTime = -1;\n    this.sleepTime = -1;\n    this.hungryTime = -1;\n    this.dieTime = -1;\n    this.poopTime = -1;\n    this.timeToStartCelebrating = -1;\n    this.timeToEndCelebrating = -1;\n  },\n  hungry() {\n    this.current = \"HUNGRY\";\n    this.dieTime = getNextDieTime(this.clock);\n    this.hungryTime = -1;\n    modFox(\"hungry\");\n  },\n  poop() {\n    this.current = \"POOPING\";\n    this.poopTime = -1;\n    this.dieTime = getNextDieTime(this.clock);\n    modFox(\"pooping\");\n  },\n  die() {\n    console.log(\"fox dead\");\n    this.current = \"DEAD\";\n    modScene(\"dead\");\n    modFox(\"dead\");\n    this.clearTimes();\n    writeModal(\"The fox died :( <br/> Press the middle button to start\");\n  },\n  startCelebrating() {\n    this.current = \"CELEBRATING\";\n    modFox(\"celebrate\");\n    this.timeToStartCelebrating = -1;\n    this.timeToEndCelebrating = this.clock + 2;\n  },\n  endCelebrating() {\n    this.timeToEndCelebrating = -1;\n    this.current = \"IDLING\";\n    this.determineFoxState();\n    togglePoopBag(false);\n  },\n  determineFoxState() {\n    if (this.current === \"IDLING\") {\n      if (SCENES[this.scene] === \"rain\") {\n        modFox(\"rain\");\n      } else {\n        modFox(\"idling\");\n      }\n    }\n  },\n  handleUserAction(icon) {\n    const states = [\"SLEEP\", \"FEEDING\", \"CELEBRATING\", \"HATCHING\"];\n    console.log(icon);\n    if (states.includes(this.current)) {\n      // do nothing\n      return;\n    }\n\n    if (this.current === \"INIT\" || this.current === \"DEAD\") {\n      this.startGame();\n      return;\n    }\n\n    switch (icon) {\n      case \"weather\":\n        this.changeWeather();\n        break;\n      case \"poop\":\n        this.cleanUpPoop();\n        break;\n      case \"fish\":\n        this.feed();\n        break;\n    }\n  },\n  changeWeather() {\n    console.log(\"changeWeather\");\n    this.scene = (this.scene + 1) % SCENES.length;\n    modScene(SCENES[this.scene]);\n    this.determineFoxState();\n  },\n  cleanUpPoop() {\n    console.log(\"cleaningUpPoop\");\n    if (this.current !== \"POOPING\") {\n      return;\n    }\n\n    this.dieTime = -1;\n    togglePoopBag(true);\n    this.startCelebrating();\n    this.hungryTime = getNextHungerTime(this.clock);\n  },\n  feed() {\n    console.log(\"feed\");\n    if (this.current !== \"HUNGRY\") {\n      return;\n    }\n    this.current = \"FEEDING\";\n    this.dieTime = -1;\n    this.poopTime = getNextPoopTime(this.clock);\n    modFox(\"eating\");\n    this.timeToStartCelebrating = this.clock + 2;\n  },\n};\n\nexport const handleUserAction = gameState.handleUserAction.bind(gameState);\nexport default gameState;\n","export const TICK_RATE = 3000;\nexport const ICONS = [\"fish\", \"poop\", \"weather\"];\nexport const RAIN_CHANCE = 0.2;\nexport const SCENES = [\"day\", \"rain\"];\nexport const DAY_LENGTH = 60;\nexport const NIGHT_LENGTH = 4;\n\nexport const getNextHungerTime = (clock) =>\n  Math.floor(Math.random() * 3) + 5 + clock;\nexport const getNextDieTime = (clock) =>\n  Math.floor(Math.random() * 2) + 3 + clock;\nexport const getNextPoopTime = (clock) =>\n  Math.floor(Math.random() * 3) + 4 + clock;\n","export const modFox = (state) => {\n  document.querySelector(\".fox\").className = `fox-${state} fox`;\n};\n\nexport const modScene = (state) => {\n  document.querySelector(\".game\").className = `game ${state}`;\n};\n\nexport const togglePoopBag = (show) => {\n  document.querySelector(\".poop-bag\").classList.toggle(\"hidden\", !show);\n};\n\nexport const writeModal = (text = \"\") => {\n  document.querySelector(\".modal\").innerHTML = `\n  <div class=\"modal-inner\">${text}</div>\n  `;\n};\n","import { ICONS } from \"./constants.js\";\n\nconst toggleHilighted = (icon, show) =>\n  document\n    .querySelector(`.${ICONS[icon]}-icon`)\n    .classList.toggle(\"highlighted\", show);\n\nexport default function initButtons(handleUserAction) {\n  let selectedIcon = 0;\n\n  function buttonClick({ target }) {\n    if (target.classList.contains(\"left-btn\")) {\n      toggleHilighted(selectedIcon, false);\n      selectedIcon = (2 + selectedIcon) % ICONS.length;\n      toggleHilighted(selectedIcon, true);\n    } else if (target.classList.contains(\"right-btn\")) {\n      toggleHilighted(selectedIcon, false);\n      selectedIcon = (1 + selectedIcon) % ICONS.length;\n      toggleHilighted(selectedIcon, true);\n    } else {\n      handleUserAction(ICONS[selectedIcon]);\n    }\n  }\n\n  document.querySelector(\".buttons\").addEventListener(\"click\", buttonClick);\n}\n"],"names":["$826109a56306c1ec$export$fde44257752a9f60","$826109a56306c1ec$export$d3112996f706f1c","$826109a56306c1ec$export$57d09a4d1c60d13c","clock","Math","floor","random","$826109a56306c1ec$export$90ecfaab96696ff","$826109a56306c1ec$export$c0dfc64653b730bf","$264b11b18bc87cf6$export$31edf49e44578506","state","document","querySelector","className","$264b11b18bc87cf6$export$1f9518c2c59b8e99","$264b11b18bc87cf6$export$7ee9422b060e0e7b","show","classList","toggle","$264b11b18bc87cf6$export$cd949469e93f219e","text","innerHTML","$9b7ff7c78ea61b59$var$gameState","current","wakeTime","sleepTime","hungryTime","poopTime","dieTime","timeToStartCelebrating","timeToEndCelebrating","tick","console","log","wake","sleep","hungry","startCelebrating","endCelebrating","poop","die","startGame","scene","determineFoxState","clearTimes","handleUserAction","icon","states","includes","changeWeather","cleanUpPoop","feed","length","$9b7ff7c78ea61b59$export$ccab573699251c80","bind","$8558c42164faec60$var$toggleHilighted","$113300e25b3f2fa7$var$init","selectedIcon","addEventListener","target","contains","nextTimeToTick","Date","now","requestAnimationFrame","nextAnimationFrame"],"version":3,"file":"index.257b1762.js.map"}